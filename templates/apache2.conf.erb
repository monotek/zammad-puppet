# file is managed by puppet
# do not edit!
#
# this is the apache config for zammad
#

<VirtualHost *:80>
    # replace 'localhost' with your fqdn if you want to use zammad from remote
    ServerName <%= @zammad_domain %>

    ## don't loose time with IP address lookups
    HostnameLookups Off

    ## needed for named virtual hosts
    UseCanonicalName Off

    ## configures the footer on server-generated documents
    ServerSignature Off

    ProxyRequests Off
    ProxyPreserveHost On

    <Proxy localhost:<%= @zammad_rails_port %>>
	    Require local
    </Proxy>

    ProxyPass /assets !
    ProxyPass /favicon.ico !
    ProxyPass /robots.txt !
    ProxyPass /ws ws://localhost:<%= @zammad_websocket_port %>/
    ProxyPass / http://localhost:<%= @zammad_rails_port %>/

    DocumentRoot "<%= @zammad_home_directory %>/public"

    <Directory />
      Options FollowSymLinks
      AllowOverride None
    </Directory>

    <Directory "<%= @zammad_home_directory %>/public">
      Options FollowSymLinks
	    Require all granted
    </Directory>

</VirtualHost>
